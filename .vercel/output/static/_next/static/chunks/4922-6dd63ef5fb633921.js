"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4922],{98278:(e,s,r)=>{r.d(s,{A:()=>P});var a=r(74848),n=r(32816),t=r(696),i=r(65712),o=r(49632),l=r(14320),d=r(21302),c=r(28287),h=r(96540),u=r(24161),m=r(75414),p=r(78117),x=r(41560),g=r(62539),f=r(85771),j=r(11692),y=r(38495),b=r(49785),v=r(33855),S=r(36865),w=r(91826),A=r(84213),R=r(11928);let C=h.memo(e=>{let{defaultAddress:s,onContinue:r}=e,n=(0,b.mN)({mode:"onBlur",defaultValues:{address:s}}),{handleSubmit:t,formState:i,setError:o,clearErrors:l,watch:d}=n,c=(0,S.A)(),m=d("address");h.useEffect(()=>{l("root")},[m,l]);let p=t(h.useCallback(async e=>{var s,a;try{let a={contractAddress:e.address},n=await c("address_verification",{fetchParams:{method:"POST",body:a},pathParams:{chainId:u.A.chain.id,type:":prepare"}});if("SUCCESS"!==n.status){let e="number"==typeof n.status?"UNKNOWN_ERROR":n.status,r=("payload"in n?null===(s=n.payload)||void 0===s?void 0:s.message:void 0)||"Oops! Something went wrong";return o("root",{type:e,message:r})}r({...n.result,address:e.address})}catch(e){o("root",{type:"manual",message:(null===(a=e.payload)||void 0===a?void 0:a.message)||"Oops! Something went wrong"})}},[c,r,o])),x=(()=>{var e,s;switch(null===(e=i.errors.root)||void 0===e?void 0:e.type){case"INVALID_ADDRESS_ERROR":return(0,a.jsx)("span",{children:"Specified address either does not exist or is EOA."});case"IS_OWNER_ERROR":return(0,a.jsx)("span",{children:"Ownership of this contract address is already verified by this account."});case"OWNERSHIP_VERIFIED_ERROR":return(0,a.jsx)("span",{children:"Ownership of this contract address is already verified by another account."});case"SOURCE_CODE_NOT_VERIFIED_ERROR":{let e=(0,v.w)({pathname:"/address/[hash]/contract-verification",query:{hash:m}});return(0,a.jsxs)(g.az,{children:[(0,a.jsx)("span",{children:"The contract source code you entered is not yet verified. Please follow these steps to "}),(0,a.jsx)(A.A,{href:e,children:"verify the contract"}),(0,a.jsx)("span",{children:"."})]})}case void 0:return null;default:return null===(s=i.errors.root)||void 0===s?void 0:s.message}})();return(0,a.jsx)(b.Op,{...n,children:(0,a.jsxs)("form",{noValidate:!0,onSubmit:p,children:[(0,a.jsx)(g.az,{children:"Enter the contract address you are verifying ownership for."}),x&&(0,a.jsx)(f.F,{status:"warning",mt:3,children:x}),(0,a.jsx)(w.A,{name:"address",isRequired:!0,bgColor:"dialog_bg",placeholder:"Smart contract address (0x...)",mt:8}),(0,a.jsxs)(j.s,{alignItems:{base:"flex-start",lg:"center"},mt:8,columnGap:5,rowGap:2,flexDir:{base:"column",lg:"row"},children:[(0,a.jsx)(y.$,{size:"lg",type:"submit",isLoading:i.isSubmitting,loadingText:"Continue",flexShrink:0,children:"Continue"}),(0,a.jsx)(R.A,{})]})]})})});var k=r(65269),E=r(12619),N=r(95170),_=r(17891),I=r(78639),O=r(96029),T=r(92627),D=r(30208),V=r(4305);let W=/^0x[a-fA-F\d]{130}$/,z=h.memo(e=>{let{address:s,signingMessage:r,contractCreator:n,contractOwner:t,onContinue:i,noWeb3Provider:o}=e,[d,c]=h.useState(o?"manual":"wallet"),{open:m}=(0,_.JS)(),{isConnected:p}=(0,I.F)(),x=(0,b.mN)({mode:"onBlur",defaultValues:{message:r}}),{handleSubmit:v,formState:w,setValue:A,getValues:C,setError:z,clearErrors:G,watch:P}=x,B=(0,S.A)(),F=P("signature");h.useEffect(()=>{G("root")},[G,F]);let L=v(h.useCallback(async e=>{try{let r={contractAddress:s,message:e.message,signature:e.signature},a=await B("address_verification",{fetchParams:{method:"POST",body:r},pathParams:{chainId:u.A.chain.id,type:":verify"}});if("SUCCESS"!==a.status){let e="number"==typeof a.status?"UNKNOWN_STATUS":a.status;return z("root",{type:e,message:"INVALID_SIGNER_ERROR"===a.status?a.invalidSigner.signer:void 0})}i(a.result.verifiedAddress,d)}catch(e){z("root",{type:"UNKNOWN_STATUS"})}},[s,B,i,z,d])),{signMessage:U,isPending:$}=(0,O.Y)(),Y=h.useCallback(e=>{c(e),G("root")},[G]),q=h.useCallback(()=>{G("root"),m()},[G,m]),K=h.useCallback(()=>{if(G("root"),!p)return z("root",{type:"manual",message:"Please connect to your Web3 wallet first"});U({message:C("message")},{onSuccess:e=>{A("signature",e),L()},onError:e=>z("root",{type:"SIGNING_FAIL",message:(null==e?void 0:e.message)||"Oops! Something went wrong"})})},[G,p,C,U,z,A,L]),M=h.useCallback(()=>{G("root"),L()},[G,L]),H="manual"===d?(0,a.jsx)(y.$,{size:"lg",onClick:M,isLoading:w.isSubmitting,loadingText:"Verifying",children:"Verify"}):(0,a.jsx)(y.$,{size:"lg",onClick:p?K:q,isLoading:w.isSubmitting||$,loadingText:$?"Signing":"Verifying",children:p?"Sign and verify":"Connect wallet"}),J=(0,a.jsxs)("span",{children:["contact us ",(0,a.jsx)(l.N,{href:"mailto:help@blockscout.com",children:"help@blockscout.com"})]}),X=(()=>{var e;switch(null===(e=w.errors.root)||void 0===e?void 0:e.type){case"INVALID_SIGNATURE_ERROR":return(0,a.jsx)("span",{children:"The signature could not be processed."});case"VALIDITY_EXPIRED_ERROR":return(0,a.jsx)("span",{children:"This verification message has expired. Add the contract address to restart the process."});case"SIGNING_FAIL":return(0,a.jsx)("span",{children:w.errors.root.message});case"INVALID_SIGNER_ERROR":{let e=(0,T.A)(w.errors.root.message||""),s=[n,t].filter(Boolean).map(e=>(0,T.A)(e)).join(", ");return(0,a.jsxs)(g.az,{children:[(0,a.jsx)("span",{children:"This address "}),(0,a.jsx)("span",{children:e}),(0,a.jsx)("span",{children:" is not a creator/owner of the requested contract and cannot claim ownership. Only "}),(0,a.jsx)("span",{children:s}),(0,a.jsx)("span",{children:" can verify ownership of this contract."})]})}case"UNKNOWN_STATUS":return(0,a.jsxs)(g.az,{children:[(0,a.jsx)("span",{children:"We are not able to process the verify account ownership for this contract address. Kindly "}),J,(0,a.jsx)("span",{children:" for further assistance."})]});case void 0:return null}})();return(0,a.jsx)(b.Op,{...x,children:(0,a.jsxs)("form",{noValidate:!0,onSubmit:L,children:[X&&(0,a.jsx)(f.F,{status:"warning",mb:6,children:X}),(0,a.jsxs)(g.az,{mb:8,children:[(0,a.jsx)("span",{children:"Please select the address to sign and copy the message and sign it using the Blockscout message provider of your choice. "}),(0,a.jsx)(l.N,{href:"https://docs.blockscout.com/for-users/my-account/verified-addresses/copy-and-sign-message",target:"_blank",children:"Additional instructions"}),(0,a.jsx)("span",{children:". If you do not see your address here but are sure that you are the owner of the contract, kindly "}),J,(0,a.jsx)("span",{children:" for further assistance."})]}),(t||n)&&(0,a.jsxs)(j.s,{flexDir:"column",rowGap:4,mb:4,children:[n&&(0,a.jsxs)(g.az,{children:[(0,a.jsx)(k.B.span,{fontWeight:600,children:"Contract creator: "}),(0,a.jsx)(k.B.span,{children:n})]}),t&&(0,a.jsxs)(g.az,{children:[(0,a.jsx)(k.B.span,{fontWeight:600,children:"Contract owner: "}),(0,a.jsx)(k.B.span,{children:t})]})]}),(0,a.jsxs)(j.s,{rowGap:5,flexDir:"column",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(D.A,{text:r,ml:"auto",display:"block"}),(0,a.jsx)(V.A,{name:"message",placeholder:"Message to sign",isRequired:!0,asComponent:"Textarea",isReadOnly:!0,maxH:{base:"140px",lg:"80px"},bgColor:"dialog_bg"})]}),!o&&(0,a.jsxs)(E.z,{onChange:Y,value:d,display:"flex",flexDir:"column",rowGap:4,children:[(0,a.jsx)(N.s,{value:"wallet",children:"Sign via Web3 wallet"}),(0,a.jsx)(N.s,{value:"manual",children:"Sign manually"})]}),"manual"===d&&(0,a.jsx)(V.A,{name:"signature",placeholder:"Signature hash",isRequired:!0,rules:{pattern:W},bgColor:"dialog_bg"})]}),(0,a.jsxs)(j.s,{alignItems:{base:"flex-start",lg:"center"},mt:8,columnGap:5,rowGap:2,flexDir:{base:"column",lg:"row"},children:[H,(0,a.jsx)(R.A,{})]})]})})}),G=h.memo(e=>{let{onAddTokenInfoClick:s,onShowListClick:r,isToken:n,address:t}=e;return(0,a.jsxs)(g.az,{children:[(0,a.jsxs)(f.F,{status:"success",flexWrap:"wrap",whiteSpace:"pre-wrap",wordBreak:"break-word",mb:3,display:"inline-block",children:[(0,a.jsx)("span",{children:"The address ownership for "}),(0,a.jsx)(k.B.span,{fontWeight:700,children:t}),(0,a.jsx)("span",{children:" is verified."})]}),(0,a.jsx)("p",{children:"You may now submit the “Add token information” request"}),(0,a.jsxs)(j.s,{alignItems:"center",mt:8,columnGap:5,flexWrap:"wrap",rowGap:5,children:[(0,a.jsx)(y.$,{size:"lg",variant:n?"outline":"solid",onClick:r,children:"View my verified addresses"}),n&&(0,a.jsx)(y.$,{size:"lg",onClick:s,children:"Add token information"})]})]})}),P=h.memo(e=>{let{defaultAddress:s,isOpen:r,onClose:g,onSubmit:f,onAddTokenInfoClick:j,onShowListClick:y,pageType:b}=e,[v,S]=h.useState(0),[w,A]=h.useState({address:"",signingMessage:""});h.useEffect(()=>{r&&m.$s(m.wf.VERIFY_ADDRESS,{Action:"Form opened","Page type":b})},[r,b]);let R=h.useCallback(e=>{A(e),S(e=>e+1),m.$s(m.wf.VERIFY_ADDRESS,{Action:"Address entered","Page type":b})},[b]),k=h.useCallback((e,s)=>{f(e),S(e=>e+1),A(s=>({...s,isToken:!!e.metadata.tokenName})),m.$s(m.wf.VERIFY_ADDRESS,{Action:"Sign ownership","Page type":b,"Sign method":s})},[f,b]),E=h.useCallback(()=>{S(e=>e-1)},[]),N=h.useCallback(()=>{g(),S(0),A({address:"",signingMessage:""})},[g]),_=h.useCallback(()=>{j(w.address),N()},[N,w.address,j]),I=[{title:"Verify new address ownership",content:(0,a.jsx)(C,{onContinue:R,defaultAddress:s})},{title:"Copy and sign message",content:(0,a.jsx)(z,{...w,onContinue:k,noWeb3Provider:!u.A.features.blockchainInteraction.isEnabled})},{title:"Congrats! Address is verified.",content:(0,a.jsx)(G,{onShowListClick:y,onAddTokenInfoClick:_,isToken:w.isToken,address:w.address})}][v];return(0,a.jsxs)(n.aF,{isOpen:r,onClose:N,size:{base:"full",lg:"md"},children:[(0,a.jsx)(t.m,{}),(0,a.jsxs)(i.$,{children:[(0,a.jsxs)(o.r,{fontWeight:"500",textStyle:"h3",mb:6,children:[0!==v&&(0,a.jsx)(l.N,{mr:3,onClick:E,children:(0,a.jsx)(p.A,{name:"arrows/east",boxSize:6,transform:"rotate(180deg)",verticalAlign:"middle",color:"gray.400"})}),(0,a.jsx)("span",{children:I.title})]}),(0,a.jsx)(d.s,{}),(0,a.jsx)(c.c,{mb:0,children:(0,a.jsx)(x.A,{children:I.content})})]})]})})},70971:(e,s,r)=>{r.d(s,{A:()=>c});var a=r(74848),n=r(65269),t=r(3253),i=r(65602),o=r(73867);r(96540);var l=r(25366);let d=(0,n.B)(e=>{let{isAnimated:s,children:r,className:n}=e;return(0,a.jsx)(t.x,{as:o.P.div,w:"100%",initial:s?{opacity:0,scale:.97}:{opacity:1,scale:1},animate:{opacity:1,scale:1},transitionDuration:"normal",transitionTimingFunction:"linear",rowGap:2,columnGap:2,gridTemplateColumns:"86px auto",alignItems:"start",paddingY:4,borderColor:"divider",borderTopWidth:"1px",_last:{borderBottomWidth:"1px"},className:n,fontSize:"sm",lineHeight:"20px",children:r})}),c={Container:d,Label:(0,n.B)(e=>{let{children:s,className:r,isLoading:n}=e;return(0,a.jsx)(l.A,{className:r,isLoaded:!n,fontWeight:500,my:"5px",justifySelf:"start",children:s})}),Value:(0,n.B)(e=>{let{children:s,className:r}=e;return(0,a.jsx)(i.E,{className:r,py:"5px",color:"text_secondary",overflow:"hidden",children:s})})}},91826:(e,s,r)=>{r.d(s,{A:()=>o});var a=r(74848),n=r(96540),t=r(5444),i=r(4305);let o=n.memo(e=>{let s=n.useMemo(()=>{var s;return{...e.rules,validate:{...null===(s=e.rules)||void 0===s?void 0:s.validate,address:t.Pc}}},[e.rules]);return(0,a.jsx)(i.A,{...e,placeholder:e.placeholder||"Address (0x...)",rules:s})})},11928:(e,s,r)=>{r.d(s,{A:()=>o});var a=r(74848),n=r(62539),t=r(14320),i=r(65269);r(96540);let o=(0,i.B)(e=>{let{className:s}=e;return(0,a.jsxs)(n.az,{className:s,children:[(0,a.jsx)("span",{children:"Need help? Contact admin team at "}),(0,a.jsx)(t.N,{href:"mailto:help@blockscout.com",children:"help@blockscout.com"}),(0,a.jsx)("span",{children:" for assistance!"})]})})}}]);
//# sourceMappingURL=4922-6dd63ef5fb633921.js.map