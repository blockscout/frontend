"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4845],{54845:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var i=l(74848),n=l(38495),o=l(11692),a=l(27821),r=l(14320),s=l(86715),d=l(96540),u=l(65698),h=function(e){return e[e.all=0]="all",e[e.oneMonth=1]="oneMonth",e[e.threeMonths=2]="threeMonths",e[e.sixMonths=3]="sixMonths",e[e.oneYear=4]="oneYear",e}({}),c=l(24161),v=l(58041),f=l(61482),g=l(89783),m=l(70043),p=l(68304),x=l(75414),A=l(85665),w=l(57842),j=l(25366),b=l(25263),y=l(5760),E=l(2770),k=l(85061),R=l(13867),C=l(30208),I=l(78117),M=l(56221),q=l(52477),D=l(53916);let P=u.jg.DAY,L=e=>{switch(e){case"DAY":case"WEEK":default:return"oneMonth";case"MONTH":return"oneYear";case"YEAR":return"all"}},S=e=>{let t=(0,A.A)(e.query.interval);if(t&&Object.values(h).includes(t))return t},Y=e=>{let t=(0,A.A)(e.query.resolution);return t&&u.jg[t]?t:P},_=()=>{var e,t,l,u,h,_,N,T,z,W;let G=(0,s.useRouter)(),U=(0,A.A)(G.query.id),Z=S(G),O=Y(G)||P,[$,B]=d.useState(Z),[F,H]=d.useState(O),{zoomRange:K,handleZoom:V,handleZoomReset:J}=(0,R.A)(),Q=$||L(F),X=d.useRef(null),ee=(0,g.A)(),et=(0,m.A)(),el=(0,v.U)(),ei=d.useMemo(()=>{if(el.referrer&&el.referrer.includes("/stats"))return{label:"Back to charts list",url:el.referrer}},[el.referrer]),en=d.useCallback(e=>{B(e),G.push({pathname:G.pathname,query:{...G.query,interval:e}},void 0,{shallow:!0})},[B,G]),eo=d.useCallback(e=>{H(e),G.push({pathname:G.pathname,query:{...G.query,resolution:e}},void 0,{shallow:!0})},[H,G]),ea=d.useCallback(()=>{J(),eo(P)},[J,eo]),{items:er,info:es,lineQuery:ed}=(0,k.A)(U,F,Q);d.useEffect(()=>{es&&!c.A.meta.seo.enhancedDataEnabled&&p.y({pathname:"/stats/[id]",query:{id:U}},es)},[es,U]);let eu=d.useCallback(async()=>{x.$s(x.wf.PAGE_WIDGET,{Type:"Share chart",Info:U});try{await window.navigator.share({title:null==es?void 0:es.title,text:null==es?void 0:es.description,url:window.location.href})}catch(e){}},[es,U]);ed.isError&&(0,w.A)(ed.error)&&(0,f.A)({resource:"stats_line",error:ed.error,isError:!0});let eh=er&&er.length>2||ed.isPending,ec=!es&&ed.isPlaceholderData,ev=(0,i.jsx)(n.$,{leftIcon:(0,i.jsx)(I.A,{name:"share",w:4,h:4}),colorScheme:"blue",size:"sm",variant:"outline",onClick:eu,ml:6,children:"Share"}),ef=d.useMemo(()=>{var e,t;let l=(null===(t=ed.data)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.resolutions)||[];return D.w.filter(e=>l.includes(e.id)).map(e=>({value:e.id,label:e.title}))},[null===(t=ed.data)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.resolutions]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.A,{title:(null==es?void 0:es.title)||(null===(u=ed.data)||void 0===u?void 0:null===(l=u.info)||void 0===l?void 0:l.title)||"",mb:3,isLoading:ec,backLink:ei,secondRow:(null==es?void 0:es.description)||(null===(_=ed.data)||void 0===_?void 0:null===(h=_.info)||void 0===h?void 0:h.description),withTextAd:!0}),(0,i.jsxs)(o.s,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(o.s,{alignItems:"center",gap:{base:3,lg:6},maxW:"100%",children:[(0,i.jsxs)(o.s,{alignItems:"center",gap:3,children:[!ee&&(0,i.jsx)(a.E,{children:"Period"}),(0,i.jsx)(b.A,{interval:Q,onIntervalChange:en})]}),((null==es?void 0:es.resolutions)&&(null==es?void 0:es.resolutions.length)>1||!es&&(null===(T=ed.data)||void 0===T?void 0:null===(N=T.info)||void 0===N?void 0:N.resolutions)&&(null===(W=ed.data)||void 0===W?void 0:null===(z=W.info)||void 0===z?void 0:z.resolutions.length)>1)&&(0,i.jsxs)(o.s,{alignItems:"center",gap:3,children:[(0,i.jsx)(j.A,{isLoaded:!ec,children:ee?"Res.":"Resolution"}),(0,i.jsx)(q.A,{options:ef,defaultValue:O,onChange:eo,isLoading:ec,w:{base:"fit-content",lg:"160px"},fontWeight:600})]}),!!K&&(0,i.jsxs)(r.N,{onClick:ea,display:"flex",alignItems:"center",gap:2,children:[(0,i.jsx)(I.A,{name:"repeat",w:5,h:5}),!ee&&"Reset"]})]}),(0,i.jsxs)(o.s,{alignItems:"center",gap:3,children:[!ee&&et&&(window.navigator.share?ev:(0,i.jsx)(C.A,{text:c.A.app.baseUrl+G.asPath,size:5,type:"link",variant:"outline",colorScheme:"blue",display:"flex",borderRadius:"8px",width:8,height:8})),(eh||ed.isPlaceholderData)&&(0,i.jsx)(y.A,{items:er,title:(null==es?void 0:es.title)||"",isLoading:ed.isPlaceholderData,chartRef:X,resolution:F,zoomRange:K,handleZoom:V,handleZoomReset:J,chartUrl:ee?window.location.href:void 0})]})]}),(0,i.jsx)(o.s,{ref:X,flexGrow:1,h:"50vh",mt:3,position:"relative",children:(0,i.jsx)(E.A,{isError:ed.isError,items:er,title:(null==es?void 0:es.title)||"",units:(null==es?void 0:es.units)||void 0,isEnlarged:!0,isLoading:ed.isPlaceholderData,zoomRange:K,handleZoom:V,emptyText:"No data for the selected resolution & interval.",resolution:F})})]})}},57842:(e,t,l)=>{l.d(t,{A:()=>n});let i=[403,404,422,429];function n(e){return i.includes(e.status)}}}]);
//# sourceMappingURL=4845.091316436d50fec4.js.map