"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6224],{51688:(e,t,n)=>{n.d(t,{A:()=>r});function r(e,t){let n=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),r.click(),r.remove(),URL.revokeObjectURL(n)}},5760:(e,t,n)=>{n.d(t,{A:()=>D});var r=n(74848),l=n(48996),a=n(72055),s=n(89618),c=n(48706),o=n(7963),i=n(70448),u=n(94681),h=n(18802),m=n.n(h),d=n(96540),x=n(73429),f=n(70043),v=n(44809),j=n(51688),g=n(26070),p=n(25366),b=n(78117),y=n(32816),k=n(696),A=n(65712),w=n(62539),C=n(3253),z=n(91311),S=n(27821),_=n(38495),E=n(21302),R=n(28287),X=n(2770);let L=e=>{let{isOpen:t,title:n,description:l,items:a,units:s,onClose:c,resolution:o,zoomRange:i,handleZoom:u,handleZoomReset:h}=e;return(0,r.jsxs)(y.aF,{isOpen:t,onClose:c,size:"full",isCentered:!0,children:[(0,r.jsx)(k.m,{}),(0,r.jsxs)(A.$,{children:[(0,r.jsx)(w.az,{mb:1,children:(0,r.jsxs)(C.x,{gridColumnGap:2,children:[(0,r.jsx)(z.D,{mb:1,size:{base:"xs",sm:"md"},children:n}),l&&(0,r.jsx)(S.E,{gridColumn:1,as:"p",variant:"secondary",fontSize:"xs",children:l}),!!i&&(0,r.jsx)(_.$,{leftIcon:(0,r.jsx)(b.A,{name:"repeat",w:4,h:4}),colorScheme:"blue",gridColumn:2,justifySelf:"end",alignSelf:"top",gridRow:"1/3",size:"sm",variant:"outline",onClick:h,children:"Reset zoom"})]})}),(0,r.jsx)(E.s,{}),(0,r.jsx)(R.c,{h:"100%",margin:{bottom:60},children:(0,r.jsx)(X.A,{isEnlarged:!0,items:a,units:s,handleZoom:u,zoomRange:i,title:n,resolution:o})})]})]})},D=e=>{let{items:t,title:n,description:h,units:y,isLoading:k,chartRef:A,chartUrl:w,resolution:C,zoomRange:z,handleZoom:S,handleZoomReset:_}=e,E=(0,l.dU)("white","black"),[R,X]=d.useState(!1),{onCopy:D}=(0,a.i)(null!=w?w:""),M=(0,f.A)(),V=d.useCallback(()=>{X(!0)},[]),N=d.useCallback(()=>{X(!1)},[]),O=d.useCallback(()=>{setTimeout(()=>{A.current&&m().toPng(A.current,{quality:100,bgcolor:E,width:5*A.current.offsetWidth,height:5*A.current.offsetHeight,filter:e=>"BUTTON"!==e.nodeName,style:{borderColor:"transparent",transform:"scale(".concat(5,")"),"transform-origin":"top left"}}).then(e=>{let t=document.createElement("a");t.download="".concat(n," (Blockscout chart).png"),t.href=e,t.click(),t.remove()})},100)},[E,n,A]),Y=d.useCallback(()=>{t&&function(e,t,n){let r=new Blob([(0,v.unparse)([e,...t])],{type:"text/csv;charset=utf-8;"});(0,j.A)(r,n)}(["Date","Value"],t.map(e=>[(0,x.A)(e.date).format("YYYY-MM-DD"),String(e.value)]),"".concat(n," (Blockscout stats)"))},[t,n]),W=M&&window.navigator.share,B=d.useCallback(async()=>{try{await window.navigator.share({title:n,text:h,url:w})}catch(e){}},[n,h,w]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(g.A,{children:[(0,r.jsx)(p.A,{isLoaded:!k,borderRadius:"base",children:(0,r.jsx)(s.I,{w:"36px",h:"32px",icon:(0,r.jsx)(b.A,{name:"dots",boxSize:4,transform:"rotate(-90deg)"}),colorScheme:"gray",variant:"simple",as:c.K,children:(0,r.jsx)(o.s6,{children:"Open chart options menu"})})}),(0,r.jsxs)(i.c,{children:[w&&(0,r.jsxs)(u.D,{display:"flex",alignItems:"center",onClick:W?B:D,closeOnSelect:!W,children:[(0,r.jsx)(b.A,{name:W?"share":"copy",boxSize:5,mr:3}),W?"Share":"Copy link"]}),(0,r.jsxs)(u.D,{display:"flex",alignItems:"center",onClick:V,children:[(0,r.jsx)(b.A,{name:"scope",boxSize:5,mr:3}),"View fullscreen"]}),(0,r.jsxs)(u.D,{display:"flex",alignItems:"center",onClick:O,children:[(0,r.jsx)(b.A,{name:"files/image",boxSize:5,mr:3}),"Save as PNG"]}),(0,r.jsxs)(u.D,{display:"flex",alignItems:"center",onClick:Y,children:[(0,r.jsx)(b.A,{name:"files/csv",boxSize:5,mr:3}),"Save as CSV"]})]})]}),t&&R&&(0,r.jsx)(L,{isOpen:!0,items:t,title:n,description:h,onClose:N,units:y,resolution:C,zoomRange:z,handleZoom:S,handleZoomReset:_})]})}},2770:(e,t,n)=>{n.d(t,{A:()=>D});var r,l=n(74848),a=n(11692),s=n(27821),c=n(14320),o=n(77638),i=n(62539),u=n(96540),h=n(10600),m=n(25366),d=n(48996),x=n(93809);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let v=function(e){return u.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 120 24"},e),r||(r=u.createElement("g",{fill:"currentColor"},u.createElement("path",{fillRule:"evenodd",d:"M7.71 3a1 1 0 0 0-1-1H4.52a1 1 0 0 0-1 1v2.167a1 1 0 0 1-1 1H1a1 1 0 0 0-1 1V21a1 1 0 0 0 1 1h2.188a1 1 0 0 0 1-1V7.167a1 1 0 0 1 1-1H6.71a1 1 0 0 0 1-1zm8.404 0a1 1 0 0 0-1-1h-2.188a1 1 0 0 0-1 1v2.167a1 1 0 0 0 1 1h1.376a1 1 0 0 1 1 1V21a1 1 0 0 0 1 1h2.188a1 1 0 0 0 1-1V7.167a1 1 0 0 0-1-1h-1.376a1 1 0 0 1-1-1zm-4.246 7.976a1 1 0 0 0-1-1H8.68a1 1 0 0 0-1 1v6.095a1 1 0 0 0 1 1h2.188a1 1 0 0 0 1-1z",clipRule:"evenodd"}),u.createElement("path",{d:"M27.702 6.533h4.948c2.095 0 3.23 1.103 3.23 2.69a2.466 2.466 0 0 1-1.495 2.344v.052a2.81 2.81 0 0 1 1.463 1.049 2.83 2.83 0 0 1 .53 1.725c0 1.774-1.228 3.17-3.453 3.17h-5.223zm4.982 4.482c.79 0 1.357-.585 1.357-1.477 0-.89-.567-1.476-1.357-1.476h-3.139v2.953zm.223 5.032c.945 0 1.632-.724 1.632-1.775s-.687-1.758-1.632-1.758h-3.362v3.533zm5.773-8.202h-1.036V6.181h2.851v11.375h-1.82zm3.501 5.635c0-2.5 1.84-4.343 4.383-4.343s4.398 1.827 4.398 4.342c0 2.516-1.838 4.325-4.398 4.325s-4.383-1.826-4.383-4.325zm3.902 2.687h.982c1.117 0 2.096-1.189 2.096-2.688s-.982-2.707-2.096-2.707h-.982c-1.116 0-2.095 1.23-2.095 2.707s.979 2.688 2.095 2.688zm6.062-2.705c0-2.55 1.755-4.325 4.28-4.325 2.027 0 3.625 1.051 3.882 3.2h-1.769c-.172-1.085-.945-1.568-1.735-1.568h-.859c-1.1 0-1.993 1.206-1.993 2.708s.893 2.722 1.993 2.722h.859a1.75 1.75 0 0 0 1.187-.459 1.76 1.76 0 0 0 .565-1.143h1.77c-.246 2.12-1.856 3.222-3.927 3.222-2.518-.015-4.253-1.807-4.253-4.357zm9.809-7.281h1.804v6.274h1.308l2.44-3.084h2.06L66.56 13.18l3.144 4.377H67.54l-2.629-3.619h-1.153v3.619h-1.804zm8.575 8.918h1.735c.086.724.532 1.189 1.472 1.189h1.136c.808 0 1.186-.414 1.186-.965s-.31-.879-1.048-.985l-1.91-.246c-1.614-.19-2.336-1.154-2.336-2.412 0-1.654 1.227-2.55 3.419-2.55 2.098 0 3.37.844 3.436 2.722h-1.735c-.086-.706-.378-1.206-1.272-1.206H73.58c-.773 0-1.134.414-1.134.948s.344.896 1.083 1l1.926.245c1.563.19 2.285 1.034 2.285 2.344 0 1.688-1.117 2.619-3.59 2.619-2.393.002-3.554-.911-3.62-2.703zm8.344-1.637c0-2.55 1.752-4.325 4.28-4.325 2.027 0 3.624 1.051 3.882 3.2h-1.77c-.171-1.085-.944-1.568-1.735-1.568h-.858c-1.102 0-1.996 1.206-1.996 2.708s.894 2.722 1.996 2.722h.858a1.75 1.75 0 0 0 1.188-.459 1.76 1.76 0 0 0 .565-1.143h1.77c-.246 2.12-1.856 3.222-3.927 3.222-2.516-.015-4.253-1.807-4.253-4.357zm9.325.018c0-2.5 1.838-4.343 4.38-4.343 2.543 0 4.401 1.827 4.401 4.342 0 2.516-1.838 4.325-4.4 4.325s-4.38-1.826-4.38-4.325zm3.9 2.687h.982c1.116 0 2.098-1.189 2.098-2.688s-.982-2.707-2.098-2.707h-.982c-1.117 0-2.096 1.23-2.096 2.707s.984 2.688 2.1 2.688zm6.378-1.637V9.381h1.804v4.842c0 1.189.601 1.895 1.391 1.895h.982c.842 0 1.598-.775 1.598-1.895V9.38h1.806v8.184h-1.755v-1.12c-.491.845-1.357 1.362-2.68 1.362-1.978-.003-3.146-1.157-3.146-3.277zm10.582 1.12v-4.677h-1.58V9.381h1.58V7.087h1.821V9.38h2.13v1.585h-2.13v4.17c0 .534.172.793.756.793h1.443v1.636h-1.963c-1.321-.002-2.057-.691-2.057-1.915z"}))))},j=e=>{let t=(0,d.dU)("link","white");return(0,l.jsx)(x.I,{...e,as:v,position:"absolute",opacity:.1,top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",viewBox:"0 0 114 20",color:t})};var g=n(98579),p=n(64772),b=n(65698),y=n(89783),k=n(28980);let A=u.memo(e=>{let{type:t,scale:n,ticks:r,tickFormatGenerator:a,noAnimation:s,anchorEl:c,...o}=e,i=u.useRef(null),h=(0,d.dU)("blackAlpha.600","whiteAlpha.500"),m=(0,g.rd)("colors",h);return u.useEffect(()=>{if(!i.current)return;let e=("left"===t?p.V4s:p.l78)(n).ticks(r);a&&e.tickFormat(a(e));let l=p.Ltv(i.current);s?l.call(e):l.transition().duration(750).ease(p.yfw).call(e),l.select(".domain").remove(),l.selectAll("line").remove(),l.selectAll("text").attr("opacity",1).attr("color",m).attr("font-size","0.75rem")},[n,r,a,s,t,m]),u.useEffect(()=>{if(!c)return;let e=p.Ltv(c);return e.on("mouseout.axisX",()=>{p.Ltv(i.current).selectAll("text").style("font-weight","normal")}).on("mousemove.axisX",e=>{let[t]=p.WnM(e,c),r=n.invert(t),l=p.Ltv(i.current).selectAll("text"),a=l.data(),s=p.ylB(e=>e).left(a,r);l.style("font-weight",(e,t)=>t===s-1?"bold":"normal")}),()=>{e.on("mouseout.axisX mousemove.axisX",null)}},[c,n]),(0,l.jsx)("g",{ref:i,...o})}),w=u.memo(e=>{let{type:t,scale:n,ticks:r,size:a,noAnimation:s,...c}=e,o=u.useRef(null),i=(0,g.rd)("colors","divider");return u.useEffect(()=>{if(!o.current)return;let e=("vertical"===t?p.l78:p.V4s)(n).ticks(r).tickSize(-a),l=p.Ltv(o.current);s?l.call(e):l.transition().duration(750).ease(p.yfw).call(e),l.select(".domain").remove(),l.selectAll("text").remove(),l.selectAll("line").attr("stroke",i)},[n,r,a,s,t,i]),(0,l.jsx)("g",{ref:o,...c})});var C=n(71834),z=n(71783),S=n(73429);let _=u.memo(e=>{let{anchorEl:t,height:n,scale:r,data:a,onSelect:s}=e,c=(0,g.rd)("colors","blue.200"),o=u.useRef(null),i=u.useRef(!1),h=u.useRef(),m=u.useRef(),d=u.useCallback(e=>{let t=r.invert(e);return(0,p.ylB(e=>e.date).left)(a[0].items,t,1)},[a,r]),x=u.useCallback((e,t)=>{let n=t-e;p.Ltv(o.current).attr("opacity",1),p.Ltv(o.current).select(".ChartSelectionX__line_left").attr("x1",e).attr("x2",e),p.Ltv(o.current).select(".ChartSelectionX__line_right").attr("x1",t).attr("x2",t),p.Ltv(o.current).select(".ChartSelectionX__rect").attr("x",n>0?e:n+e).attr("width",Math.abs(n))},[]),f=u.useCallback((e,t)=>{let n=r.invert(e),l=r.invert(t);Math.abs((0,S.A)(n).diff(l,"day"))>2&&s([S.A.min((0,S.A)(n),(0,S.A)(l)).toDate(),S.A.max((0,S.A)(n),(0,S.A)(l)).toDate()])},[s,r]),v=u.useCallback(()=>{i.current=!1,h.current=void 0,m.current=void 0,p.Ltv(o.current).attr("opacity",0)},[]),j=u.useCallback(()=>{i.current&&(h.current&&m.current&&f(h.current,m.current),v())},[v,f]);return u.useEffect(()=>{if(!t)return;let e=p.Ltv(t);return e.on("mousedown.selectionX",e=>{let[n]=p.WnM(e,t);i.current=!0,h.current=n}).on("mousemove.selectionX",e=>{if(i.current){let[n]=p.WnM(e,t);h.current&&x(h.current,n),m.current=n}}).on("mouseup.selectionX",j).on("touchstart.selectionX",e=>{let n=p.D_v(e,t);i.current=2===n.length}).on("touchmove.selectionX",e=>{if(i.current){let n=p.D_v(e,t);2===n.length&&Math.abs(n[0][0]-n[1][0])>5&&(x(n[0][0],n[1][0]),h.current=n[0][0],m.current=n[1][0])}}).on("touchend.selectionX",j),p.Ltv("body").on("mouseup.selectionX",function(t){void 0!==h.current&&t.target!==e.node()&&j()}),()=>{e.on(".selectionX",null),p.Ltv("body").on(".selectionX",null)}},[t,v,x,d,j,f]),(0,l.jsxs)("g",{className:"ChartSelectionX",ref:o,opacity:0,children:[(0,l.jsx)("rect",{className:"ChartSelectionX__rect",width:0,height:n,fill:"rgba(66, 153, 225, 0.1)"}),(0,l.jsx)("line",{className:"ChartSelectionX__line ChartSelectionX__line_left",x1:0,x2:0,y1:0,y2:n,stroke:c}),(0,l.jsx)("line",{className:"ChartSelectionX__line ChartSelectionX__line_right",x1:0,x2:0,y1:0,y2:n,stroke:c})]})});var E=n(95799),R=n(87343);let X={bottom:20,left:10,right:20,top:10},L=u.memo(e=>{let{isEnlarged:t,items:n,onZoom:r,title:a,margin:s,units:c,noAnimation:o,resolution:i,zoomRange:h}=e,m=(0,y.A)(),d=(0,g.rd)("colors","blue.200"),x="chart-".concat(a.split(" ").join(""),"-").concat(t?"fullscreen":"small"),f=u.useRef(null),v=u.useMemo(()=>h||[n[0].date,n[n.length-1].date],[h,n]),j=u.useMemo(()=>n.filter(e=>e.date>=v[0]&&e.date<=v[1]).map(e=>({...e,dateLabel:function(e,t,n){switch(n){case b.jg.WEEK:return p.DCK("%e %b %Y")(e)+(t?" – ".concat(p.DCK("%e %b %Y")(t)):"");case b.jg.MONTH:return p.DCK("%b %Y")(e);case b.jg.YEAR:return p.DCK("%Y")(e);default:return p.DCK("%e %b %Y")(e)}}(e.date,e.date_to,i)})),[n,v,i]),S=u.useMemo(()=>[{items:j,name:"Value",color:d,units:c}],[d,j,c]),L=u.useMemo(()=>({...X,...s}),[s]),D=u.useMemo(()=>({x:{ticks:t&&!m?8:4},y:{ticks:t?6:3,nice:!0}}),[t,m]),{ref:M,rect:V,innerWidth:N,innerHeight:O,chartMargin:Y,axes:W}=(0,R.A)({data:S,margin:L,axesConfig:D});return(0,l.jsx)("svg",{width:"100%",height:"100%",ref:M,cursor:"pointer",id:x,opacity:V?1:0,children:(0,l.jsxs)("g",{transform:"translate(".concat((null==Y?void 0:Y.left)||0,",").concat((null==Y?void 0:Y.top)||0,")"),children:[(0,l.jsx)(w,{type:"horizontal",scale:W.y.scale,ticks:D.y.ticks,size:N,noAnimation:!0}),(0,l.jsx)(k.A,{id:x,data:j,color:d,xScale:W.x.scale,yScale:W.y.scale,noAnimation:o}),(0,l.jsx)(C.A,{data:j,xScale:W.x.scale,yScale:W.y.scale,stroke:d,animation:"none",strokeWidth:m?1:2}),(0,l.jsx)(A,{type:"left",scale:W.y.scale,ticks:D.y.ticks,tickFormatGenerator:W.y.tickFormatter,noAnimation:!0}),(0,l.jsx)(A,{type:"bottom",scale:W.x.scale,transform:"translate(0, ".concat(O,")"),ticks:D.x.ticks,anchorEl:f.current,tickFormatGenerator:W.x.tickFormatter,noAnimation:!0}),(0,l.jsxs)(z.A,{ref:f,width:N,height:O,children:[(0,l.jsx)(E.A,{anchorEl:f.current,width:N,tooltipWidth:i===b.jg.WEEK?280:200,height:O,xScale:W.x.scale,yScale:W.y.scale,data:S,noAnimation:o,resolution:i}),(0,l.jsx)(_,{anchorEl:f.current,height:O,scale:W.x.scale,data:S,onSelect:r})]})]})})}),D=u.memo(e=>{let{items:t,title:n,isLoading:r,isError:u,units:d,emptyText:x,zoomRange:f,handleZoom:v,isEnlarged:g,noAnimation:p,resolution:b}=e,y=t&&t.length>2;return u?(0,l.jsx)(a.s,{alignItems:"center",justifyContent:"center",flexGrow:1,py:4,children:(0,l.jsxs)(s.E,{variant:"secondary",fontSize:"sm",textAlign:"center",children:["The data didn".concat(h.wA,"t load. Please, "),(0,l.jsx)(c.N,{href:window.document.location.href,children:"try to reload the page."})]})}):r?(0,l.jsx)(m.A,{flexGrow:1,w:"100%"}):y?(0,l.jsxs)(i.az,{flexGrow:1,maxW:"100%",position:"relative",h:"100%",children:[(0,l.jsx)(L,{items:t,zoomRange:f,onZoom:v,title:n,units:d,isEnlarged:g,noAnimation:p,resolution:b}),(0,l.jsx)(j,{w:"162px",h:"15%"})]}):(0,l.jsx)(o.o,{flexGrow:1,children:(0,l.jsx)(s.E,{variant:"secondary",fontSize:"sm",children:x||"No data"})})})},13867:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(96540);function l(){let[e,t]=r.useState(!0),[n,l]=r.useState();return{isZoomResetInitial:e,zoomRange:n,handleZoom:r.useCallback(e=>{l(e),t(!1)},[]),handleZoomReset:r.useCallback(()=>{l(void 0),t(!0)},[])}}}}]);
//# sourceMappingURL=6224-fa2ed110ef2c0f05.js.map